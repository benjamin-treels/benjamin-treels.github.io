<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>News Globe 3D - Interactif</title>
  <style>
    body { 
      margin: 0; 
      padding: 0; 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #000;
      overflow: hidden;
    }

    #globeViz {
      width: 100vw;
      height: 100vh;
      cursor: move; /* Indique qu'on peut bouger le globe */
    }

    /* --- MODALE (Pop-up) --- */
    #newsModal {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #1a1a1a; /* Fond sombre plus moderne */
      color: white;
      width: 400px;
      max-width: 90%;
      padding: 25px;
      border-radius: 12px;
      border: 1px solid #333;
      box-shadow: 0 0 50px rgba(255, 68, 68, 0.2);
      z-index: 100;
    }

    #newsModal h2 { margin-top: 0; color: #ff4444; }
    #newsModal p { line-height: 1.6; color: #ccc; }
    #newsModal img { width: 100%; border-radius: 8px; margin-bottom: 15px; object-fit: cover; height: 200px; }
    
    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 28px;
      cursor: pointer;
      color: #666;
      transition: color 0.2s;
    }
    .close-btn:hover { color: white; }

    /* Overlay sombre */
    #overlay {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.8);
      z-index: 99;
      backdrop-filter: blur(3px);
    }

    /* Titres */
    .site-title {
      position: absolute;
      top: 20px;
      left: 20px;
      color: white;
      z-index: 10;
      pointer-events: none;
      text-shadow: 0 0 10px black;
    }
    .site-title h1 { margin: 0; font-size: 24px; text-transform: uppercase; letter-spacing: 2px; color: #ff4444; }
  </style>
  
  <script src="//unpkg.com/globe.gl"></script>
</head>
<body>

  <div class="site-title">
    <h1>Global News 3D</h1>
    <p>Cliquez sur les points rouges pour voir les d√©tails</p>
  </div>

  <div id="globeViz"></div>

  <div id="overlay" onclick="closeModal()"></div>
  
  <div id="newsModal">
    <span class="close-btn" onclick="closeModal()">&times;</span>
    <img id="modalImage" src="" alt="News Image">
    <h2 id="modalTitle">Titre</h2>
    <p style="font-size: 0.9em; color: #888;">üìç <span id="modalCountry"></span></p>
    <p id="modalContent">Contenu...</p>
  </div>

  <script>
    // 1. DONN√âES
    const newsData = [
      {
        lat: 48.8566, lng: 2.3522,
        country: "France",
        title: "Innovation Tech √† Paris",
        content: "Paris devient le nouveau hub europ√©en de l'IA avec l'ouverture de Station F 2.0.",
        image: "https://images.unsplash.com/photo-1502602898657-3e91760cbb34?auto=format&fit=crop&w=500&q=60"
      },
      {
        lat: 40.7128, lng: -74.0060,
        country: "√âtats-Unis",
        title: "Wall Street en hausse",
        content: "Le march√© boursier r√©agit positivement aux nouvelles r√©gulations technologiques.",
        image: "https://images.unsplash.com/photo-1485871981535-5be8468d930e?auto=format&fit=crop&w=500&q=60"
      },
      {
        lat: 35.6762, lng: 139.6503,
        country: "Japon",
        title: "Robotique Avanc√©e",
        content: "Tokyo pr√©sente ses assistants robotiques pour les JO de l'ann√©e prochaine.",
        image: "https://images.unsplash.com/photo-1532236204992-f5e85c024202?auto=format&fit=crop&w=500&q=60"
      },
      {
        lat: -33.8688, lng: 151.2093,
        country: "Australie",
        title: "Climat & Oc√©ans",
        content: "Un plan majeur pour la sauvegarde des coraux est lanc√© ce matin √† Sydney.",
        image: "https://images.unsplash.com/photo-1523482580672-f109ba8cb9be?auto=format&fit=crop&w=500&q=60"
      },
      {
        lat: -22.9068, lng: -43.1729,
        country: "Br√©sil",
        title: "Culture √† Rio",
        content: "Le festival de musique annuel bat son plein avec une affluence record.",
        image: "https://images.unsplash.com/photo-1564245739699-b511223456e5?auto=format&fit=crop&w=500&q=60"
      },
      {
        lat: 30.0444, lng: 31.2357,
        country: "√âgypte",
        title: "D√©couverte Arch√©ologique",
        content: "Une nouvelle chambre secr√®te d√©couverte pr√®s des grandes pyramides.",
        image: "https://images.unsplash.com/photo-1539650116455-251601d87cf1?auto=format&fit=crop&w=500&q=60"
      }
    ];

    // 2. CONFIGURATION DU GLOBE
    const world = Globe()
      (document.getElementById('globeViz'))
      .globeImageUrl('//unpkg.com/three-globe/example/img/earth-blue-marble.jpg')
      .bumpImageUrl('//unpkg.com/three-globe/example/img/earth-topology.png')
      .backgroundImageUrl('//unpkg.com/three-globe/example/img/night-sky.png')
      
      // --- COUCHE DES POINTS (CLIQUABLES) ---
      .pointsData(newsData)
      .pointAltitude(0.07)      // Hauteur du point par rapport au sol
      .pointColor(() => '#ff4444') // Couleur rouge
      .pointRadius(0.5)         // Taille du point
      .pointLabel('country')    // Affiche le pays au survol (tooltip natif)
      
      // L'action au clic (LA PARTIE IMPORTANTE)
      .onPointClick(point => {
        // 1. Centrer la cam√©ra sur le point cliqu√©
        world.pointOfView({ lat: point.lat, lng: point.lng, altitude: 1.8 }, 1000);
        // 2. Ouvrir la modale
        openModal(point);
      })

      // --- COUCHE DES ANNEAUX (EFFET VISUEL) ---
      .ringsData(newsData)
      .ringColor(() => '#ff4444')
      .ringMaxRadius(5)
      .ringPropagationSpeed(2)
      .ringRepeatPeriod(800);

    // Options de la cam√©ra

    // 3. GESTION MODALE
    const modal = document.getElementById('newsModal');
    const overlay = document.getElementById('overlay');

    function openModal(data) {

      document.getElementById('modalTitle').innerText = data.title;
      document.getElementById('modalCountry').innerText = data.country;
      document.getElementById('modalContent').innerText = data.content;
      document.getElementById('modalImage').src = data.image;

      modal.style.display = 'block';
      overlay.style.display = 'block';
    }

    function closeModal() {
      modal.style.display = 'none';
      overlay.style.display = 'none';
    }

    // Responsive
    window.addEventListener('resize', () => {
      world.width(window.innerWidth).height(window.innerHeight);
    });
  </script>
</body>
</html>
